<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, viewport-fit=cover"
    />
    <title>MRPA Studio</title>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=IBM+Plex+Mono:wght@400;500&display=swap"
    />
    <link rel="stylesheet" href="/app.css?v=20260119" />
  </head>
  <body>
    <div class="app">
      <header class="topbar">
        <div class="brand">
          <span class="brand-mark"></span>
          <div>
            <div class="brand-title">MRPA Studio</div>
            <div class="brand-subtitle">Agent control and run explorer</div>
          </div>
        </div>
        <form id="run-form" class="run-form">
          <label class="field">
            <span>Goal</span>
            <input id="goal" type="text" placeholder="Describe the task" required />
          </label>
          <label class="field">
            <span>Max steps</span>
            <input id="max-steps" type="number" min="1" value="5" />
          </label>
          <label class="field">
            <span>Plan steps</span>
            <input id="plan-steps" type="number" min="1" value="5" />
          </label>
          <label class="field">
            <span>Plan verify</span>
            <select id="plan-verify">
              <option value="llm">llm</option>
              <option value="none">none</option>
            </select>
          </label>
          <label class="field">
            <span>Device</span>
            <select id="device"></select>
          </label>
          <div class="toggle-group">
            <label class="toggle">
              <input id="execute" type="checkbox" checked />
              <span>Execute</span>
            </label>
            <label class="toggle">
              <input id="plan" type="checkbox" checked />
              <span>Plan</span>
            </label>
            <label class="toggle">
              <input id="skills" type="checkbox" />
              <span>Skills</span>
            </label>
            <label class="toggle">
              <input id="text-only" type="checkbox" />
              <span>Text only</span>
            </label>
            <label class="toggle">
              <input id="plan-resume" type="checkbox" checked />
              <span>Plan resume</span>
            </label>
          </div>
          <button class="primary" type="submit">Run</button>
        </form>
      </header>

      <aside class="sidebar">
        <section class="panel">
          <div class="panel-header">
            <h2>Runs</h2>
            <button id="refresh-runs" class="ghost" type="button">Refresh</button>
          </div>
          <div id="runs" class="list"></div>
        </section>
        <section class="panel">
          <div class="panel-header">
            <h2>Steps</h2>
            <div id="run-status" class="pill">Idle</div>
          </div>
          <div id="steps" class="list"></div>
        </section>
      </aside>

      <main class="main">
        <section class="panel live">
          <div class="panel-header">
            <h2>Live devices</h2>
            <button id="refresh-devices" class="ghost" type="button">Refresh</button>
          </div>
          <div id="live-grid" class="live-grid"></div>
        </section>
        <section class="panel viewer">
          <div class="viewer-header">
            <div>
              <div class="viewer-title">Screen</div>
              <div id="step-meta" class="viewer-meta">No step selected</div>
            </div>
            <div class="viewer-tools">
              <button class="chip screen-toggle active" data-screen="before" type="button">
                Before
              </button>
              <button class="chip screen-toggle" data-screen="after" type="button">
                After
              </button>
            </div>
          </div>
          <div class="screen-frame">
            <div id="screen-empty" class="screen-empty">No screenshot loaded</div>
            <img id="screen" class="hidden" alt="Screen preview" />
          </div>
        </section>
        <section class="panel detail">
          <div class="tabs">
            <button class="tab active" data-tab="decision">Decision</button>
            <button class="tab" data-tab="prompt">Prompt</button>
            <button class="tab" data-tab="response">Response</button>
            <button class="tab" data-tab="context">Context</button>
          </div>
          <div class="tab-content">
            <pre id="tab-decision"></pre>
            <pre id="tab-prompt" class="hidden"></pre>
            <pre id="tab-response" class="hidden"></pre>
            <pre id="tab-context" class="hidden"></pre>
          </div>
        </section>
      </main>

      <aside class="inspector">
        <section class="panel">
          <div class="panel-header">
            <h2>Run details</h2>
            <button id="stop-run" class="ghost" type="button">Stop</button>
          </div>
          <pre id="run-details"></pre>
        </section>
        <section class="panel">
          <div class="panel-header">
            <h2>Verification</h2>
          </div>
          <pre id="verification"></pre>
        </section>
      </aside>
    </div>
    <script src="/app.js?v=20260119"></script>
  </body>
</html>
